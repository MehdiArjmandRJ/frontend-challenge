<div class="main-input" [ngClass]="checkErrors() ? 'have-error':''">
  <div [formGroup]="controlForm" class="main-input__box" *ngIf="controlForm; else useNgModel">
    <input [attr.maxLength]="maxLength" class="input" [ngStyle]="{'height': inputHeight}" [type]="getVisiblePassword ? 'text' : type"
      [placeholder]="placeHolder" [name]="controlName" [formControlName]="controlName" 
      (change)="onChangeValue($event)" [suffix]="isCurrency ? 'ریال' : null" [mask]="isCurrency ? 'separator.3' : null" thousandSeparator=","/>
    <div class="error" *ngIf="showError">
      <small>{{ errorMessage }}</small>
    </div>
    <!-- <label *ngIf="showError" class="error" [for]="controlName">تست</label> -->
    <div *ngIf="icon" class="icon">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.75 12.75V8.25L5.25 9.75" stroke="#616161" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M6.75 8.25L8.25 9.75" stroke="#616161" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M16.5 7.5V11.25C16.5 15 15 16.5 11.25 16.5H6.75C3 16.5 1.5 15 1.5 11.25V6.75C1.5 3 3 1.5 6.75 1.5H10.5"
          stroke="#616161" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M16.5 7.5H13.5C11.25 7.5 10.5 6.75 10.5 4.5V1.5L16.5 7.5Z" stroke="#616161" stroke-width="1.5"
          stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>

    <div [attr.aria-hidden]="getCheckType" *ngIf="getCheckType" (click)="onClickToggleVisiblePassword()" class="icon">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.75 12.75V8.25L5.25 9.75" stroke="#616161" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M6.75 8.25L8.25 9.75" stroke="#616161" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M16.5 7.5V11.25C16.5 15 15 16.5 11.25 16.5H6.75C3 16.5 1.5 15 1.5 11.25V6.75C1.5 3 3 1.5 6.75 1.5H10.5"
          stroke="#616161" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M16.5 7.5H13.5C11.25 7.5 10.5 6.75 10.5 4.5V1.5L16.5 7.5Z" stroke="#616161" stroke-width="1.5"
          stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
  </div>

  <ng-template #useNgModel>
    <div class="main-input__box">
      <input [name]="controlName" [type]="getVisiblePassword ? 'text' : type" [placeholder]="placeHolder"
        [(ngModel)]="value" (change)="onChangeValue($event)"   [suffix]="isCurrency ? 'ریال' : null" [mask]="isCurrency ? 'separator.3' : null" thousandSeparator=","/>

      <div class="icon" *ngIf="icon">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.75 12.75V8.25L5.25 9.75" stroke="#616161" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round" />
          <path d="M6.75 8.25L8.25 9.75" stroke="#616161" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round" />
          <path
            d="M16.5 7.5V11.25C16.5 15 15 16.5 11.25 16.5H6.75C3 16.5 1.5 15 1.5 11.25V6.75C1.5 3 3 1.5 6.75 1.5H10.5"
            stroke="#616161" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M16.5 7.5H13.5C11.25 7.5 10.5 6.75 10.5 4.5V1.5L16.5 7.5Z" stroke="#616161" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>

      <div [attr.aria-hidden]="getCheckType" *ngIf="getCheckType" (click)="onClickToggleVisiblePassword()"
        class="visible-password-icon">
        <svg *ngIf="!getVisiblePassword; else hiddenPasswordIcon" width="22" height="20" viewBox="0 0 22 20" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M10.9998 18.27C14.5298 18.27 17.8198 16.19 20.1098 12.59C21.0098 11.18 21.0098 8.81 20.1098 7.4C17.8198 3.8 14.5298 1.72 10.9998 1.72C7.46984 1.72 4.17984 3.8 1.88984 7.4C0.989844 8.81 0.989844 11.18 1.88984 12.59C4.17984 16.19 7.46984 18.27 10.9998 18.27Z"
            stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <ng-template #hiddenPasswordIcon>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M14.5299 9.47L9.46992 14.53C8.81992 13.88 8.41992 12.99 8.41992 12C8.41992 10.02 10.0199 8.42 11.9999 8.42C12.9899 8.42 13.8799 8.82 14.5299 9.47Z"
              stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M17.8198 5.77C16.0698 4.45 14.0698 3.73 11.9998 3.73C8.46984 3.73 5.17984 5.81 2.88984 9.41C1.98984 10.82 1.98984 13.19 2.88984 14.6C3.67984 15.84 4.59984 16.91 5.59984 17.77"
              stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M8.41992 19.53C9.55992 20.01 10.7699 20.27 11.9999 20.27C15.5299 20.27 18.8199 18.19 21.1099 14.59C22.0099 13.18 22.0099 10.81 21.1099 9.39999C20.7799 8.87999 20.4199 8.38999 20.0499 7.92999"
              stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M15.5095 12.7C15.2495 14.11 14.0995 15.26 12.6895 15.52" stroke="#292D32" stroke-width="1.5"
              stroke-linecap="round" stroke-linejoin="round" />
            <path d="M9.47 14.53L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round"
              stroke-linejoin="round" />
            <path d="M21.9993 2L14.5293 9.47" stroke="#292D32" stroke-width="1.5" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </ng-template>
      </div>
    </div>
  </ng-template>
  <div class="main-input__error-container">
    <div *ngIf="controlForm; else noForm">
      <div class="error" *ngIf="checkErrors() || showError">
        <small>{{ getErrors() }}</small>
      </div>
    </div>
    <ng-template #noForm>
      <div class="error" *ngIf="errorMessage">
        <small>{{ errorMessage }}</small>
      </div>
    </ng-template>
  </div>
</div>